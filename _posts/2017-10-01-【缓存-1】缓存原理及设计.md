---
layout:  post  # 使用的布局（不需要改）
catalog: true  # 是否归档
author: 陈国林 # 作者
tags:          #标签
    - 缓存
---

# 一. 缓存原理
1. 缓存定义  
   缓存: 计算机领域非常通用的概念。它介于应用缓存和永久性数据存储源（如硬盘上的文件或者数据库）之间，其作用是降低应用程序直接读写永久性数据存储源的频率，从而提高应用的运行性能。  
   缓存中的数据是数据存储源中数据的拷贝，缓存的物理介质通常是内存。

2. 缓存基本思想
   + 时间局限性原理: 被获取过一次的数据在未来还被多次引用，例如 `一条热门的微博被一个人看了之后，它还会被数以百万、千万级的用户查看`
   + 以空间换时间: 因为原始数据访问太慢，所以我们开辟一块存储空间，用于提供高效数据访问
   + 性能成本权衡: 构建系统时需要在系统性能和开发运行成本直接做取舍，例如 `相同成本的SSD硬盘容量是内存的10~30倍，但是读写延迟确高出50~100倍`
   
   ![](https://github.com/chenguolin/chenguolin.github.io/blob/master/data/image/cache-pyramid.png?raw=true)

3. 缓存优势
   + 提升访问性能: 缓存中存储的一般是需要频繁访问的数据，能够提升整体访问的性能，降低访问延迟
   + 降低网络拥塞: 缓存中存储的数据比DB中的原始数据小很多，降低访问DB的流量，降低网络拥堵
   + 减轻服务负载: 缓存的读写承载能力一般比DB大10~100倍以上，减少了原始数据的解析和计算，减轻服务负载
   + 增强扩展性: 可以快速部署上线，也可以随时下线
   
4. 缓存代价
   + 系统复杂度提升
   + 成本增加
   + 多份数据一致性问题（CAP）

5. 一般来说业务全量数据可以放在DB中，例如MySQL、HBASE等。但是DB单实例的性能一般，例如MySQL线上QPS最高`3000~6000`，读写平均耗时在`10~100ms`之间。而缓存的性能正是可以来弥补这种DB的性能不足，例如Memcached QPS可以达到`10~100万`之间，读写平均耗时在`1ms`以内。

# 二. 缓存读写模式
1. Cache Aside (旁路缓存)

2. Read/Write Through (读写穿透)

3. Write Behind Caching (异步缓存写入)

# 三. 缓存分类

# 四. 缓存架构设计
