---
layout:  post    # 使用的布局（不需要改）
catalog: true   # 是否归档
author: 陈国林 # 作者
tags:         #标签
    - Go
---

# 一. 概述
Go 是一门非常简单并且有趣的高级程序开发语言，跟其它语言类似它也有一些`陷阱`。很多陷阱并不是Go本身自己的问题，有一些是因为从其它语言的带来的一些习惯，有些是没有考虑清楚细节导致的。

虽然我们日常开发过程用的都是IDE (Goland) 等会自动提示我们，但是这道这些陷阱对我们写出高质量的代码具有非常大的意义。

# 二. 陷阱
1. `左括号不能放在单行`: 很多语言我们可以选择左括号放在哪个位置，但是Go不行，必须放在当前行的最后一个位置
2. `声明变量未使用`: 如果我们在函数内部定义了一个变量但是未使用，会导致编译失败。Go允许全局变量、函数参数未使用。
3. `导入代码包未使用`: 如果我们导入了一个代码包但是并未使用它的任何函数、结构体等，会导致编译失败，真的想导入可以使用 `_` 来忽略编译错误
4. `短变量定义只能在函数内部使用`: myvar := 1 这种方式定义一个变量只能在函数内部使用
5. `不能重复使用短变量定义同一个变量`: 例如 myvar := 1 重复多次
6. `不能使用短变量定义去设置变量某个字段`: 例如 data.result, err := work() 这种方式是不允许的，但是允许 a, b := work() 这种方式
7. `不要使用nil去显式初始化一个变量`: 例如 var a = nil 这种方式是不允许的，会导致编译失败
8. `slice和map零值为nil，不要没有make就直接使用`
   ```
   // slice 以下这种方式编译可以通过，但是不建议使用
   var arr []int
   arr = append(arr, 1)
   
   // map 以下这种方式会导致panic
   var m map[string]int
   m["one"] = 1 //error
   ```
9. `string变量不能被赋值为nil`: 例如 var x string = nil 这种方式是错误的，会编译失败
10. `数组做为函数参数是值拷贝方式`: 最好的方式是使用slice，而不是数组
   ```
   func main() {  
      x := [3]int{1,2,3}

      // 这里的参数使用的是数组，建议使用slice
      func(arr [3]int) {
         arr[0] = 7
         fmt.Println(arr) //prints [7 2 3]
      }(x)

      fmt.Println(x) //prints [1 2 3] (not ok if you need [7 2 3])
   }
   ```
11. 




