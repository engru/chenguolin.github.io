---
layout:  post  # 使用的布局（不需要改）
catalog: true  # 是否归档
author: 陈国林 # 作者
tags:          #标签
    - K8s
---

# 一. 背景
当我们的设备断电的时候，我们需要考虑的一个点是我们的应用程序应该要如何处理这个事件。需要注意的是，当我们把电源拔掉的时候，电源其实并不是立即断电的。
我们的应用程序需要能够去处理这种事件，同时保存相应的应用状态。

对应的，我们会有以下几种可能的处理方式

1. 将内存中的所有内容保存到磁盘，然后在下次启动时将存储在磁盘上的内容恢复到内存中，但是这种方案有个问题就是从存储到磁盘和从磁盘恢复是一个缓慢的过程。
2. 使用一个文件来存储电源状态，其中0表示电源打开，1表示电源关闭，但是这种方法意味着系统中运行的进程应该跟踪存储在文件中的这个位。
3. 系统内核发送类似 `SIGTERM` 的信号给进程，进程自己去处理这个信号

对于应用容器来说，优雅退出重不重要完全取决于应用本身，这篇文章我们会讨论在Kubernetes和Docker中如何优雅退出容器。

# 二. 信号
