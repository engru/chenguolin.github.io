---
layout:  post    # 使用的布局（不需要改）
catalog: true   # 是否归档
author: 陈国林 # 作者
tags:         #标签
    - 基础
---

# 一. 时间戳
`时间戳` 指的就是Unix时间戳(Unix timestamp)。它也被称为Unix时间(Unix time)、POSIX时间(POSIX time)，是一种时间表示方式，定义为从格林威治时间`1970年01月01日00时00分00秒`起至现在的总秒数。因此严格来说，`不管你处在地球上的哪个地方，任意时间点的时间戳都是相同的`。这点有利于线上和客户端分布式应用统一追踪时间信息。

Unix时间戳不仅被使用在Unix系统、类Unix系统中，也在许多其他操作系统中被广泛采用。但是，这并不意味着目前的时间戳规范会一直持续使用下去。因为到2038年1月19日时，Unix时间戳就会因为32位内存溢出（32-bit overflow）而无法继续使用。因此，在这一天之前，上千万的网络应用要么采用新的时间戳规范，要么迁移到64位系统，后者可以给时间戳争取一点时间。 

举例
1. Shell获取当前时间戳  
   `$ date +%s`
2. Python获取当前时间戳  
   `time.time()`
3. Golang获取当前时间戳  
   `time.Now().Unix()`

# 二. 时区
`时间戳`在地球的每一个角落都是相同的，但是同一个时刻不同地区的`时间`是不一样的。以前人们通过观察太阳的位置（时角）决定时间，这就使得不同经度的地方的时间有所不同。1863年首次使用时区的概念，时区通过设立一个区域的标准时间部分地解决了这个问题。

全部时区表可以参考 [all-time-zones](https://www.zeitverschiebung.net/cn/all-time-zones.html#)

常见的4个时区简写介绍如下
1. `UTC`: 世界标准时间或世界协调时间简称UTC (Universal Time/Temps Cordonné)
2. `GMT`: 格林尼治标准时间，指位于英国伦敦郊区的皇家格林尼治天文台的标准时间，和世界标准时间一样 (Greenwich Mean Time) `GMT=UTC`
3. `CET`: 欧洲中部时间，比世界标准时间（UTC）早1个小时 (Central European Time) `CET=UTC+1`
4. `CST`: 中国标准时间，比世界标准时间（UTC）早8个小时 (China Standard Time) `CST=UTC+8`

Linux下我们可以使用 `$ date` 查看当前的时间，输出带有当前时区信息，在中国大陆我们一般会设置时区为 `Asia/Shanghai` 也就是 `UTC+8`
1. `Sat Jun 29 06:58:40 UTC 2019` 表示UTC时间2019年6月29号06点58分40秒
2. `Sat Jun 29 14:58:40 CST 2019` 表示CST时间2019年6月29号14点58分40秒

举例
1. Shell获取当前时间  
   `$ date`
2. Python获取当前时间  
   `from datetime import datetime`  
   `datetime.now().strftime("%Y-%m-%d %H:%M:%S")` 
3. Golang获取当前时间 [golang format-parse-string-time-date-example](https://yourbasic.org/golang/format-parse-string-time-date-example/)  
   本地时间: `time.Now().Local().Format("2006-01-02 15:04:05")`  
   UTC时间: `time.Now().UTC().Format("2006-01-02 15:04:05")`  
4. Linux查看当前时区
   ```
   $ date +"%Z %z"
   UTC +0000  //+0000表示0时区即世界标准时间，-0800表示西八区即美国旧金山所在的时区，+0800表示我们中国的东八区
   ```
5. Docker很多基础镜像默认使用`UTC +0000`时区，在中国大陆使用的时候我们需要设置为 `Asia/Shanghai`，使用`ubuntu`镜像我们可以这么设置
   ```
   ENV TZ 'Asia/Shanghai'

   RUN echo $TZ > /etc/timezone \
       && apt-get update && apt-get install -y tzdata \
       && rm /etc/localtime \
       && ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \
       && dpkg-reconfigure -f noninteractive tzdata \
       && apt-get clean \
   ```


