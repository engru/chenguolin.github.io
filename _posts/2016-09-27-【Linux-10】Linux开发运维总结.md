---
layout:  post    # 使用的布局（不需要改）
catalog: true   # 是否归档
author: 陈国林 # 作者
tags:         #标签
    - Linux
---

# 一. svn命令
1. svn删除远程仓库但是保持本地仓库: $ svn del spam_host_recover/build spam_host_recover/result --keep-local  
2. svn创建branch  
   + $ svn cp http://svn.xxx.com/svn/apsara/golang/common/trunk/ (trunk地址) http://svn.xxx.com/svn/apsara/golang/common/branches/chenguolin_20141024 (要创建branch地址) -m "mkdir branch"  
   + $ svn switch http://svn.xxx.com/svn/apsara/golang/common/branches/chenguolin_20141024  
   + $ svn info  //查看是否切换到branch  
3. svn branch合并
   + 先切换到trunk
   + $ svn merge --reintegrate http://svn.xxx.com/svn/apsara/golang/common/branches/chenguolin_20141024
   + 查看diff是否merge成功
4. svn查看branch和trunk的diff
   + $ svn diff --old http://svn.xxx.com/svn/apsara/golang/common/branches/chenguolin_20141024 --new http://svn.xxx.com/svn/apsara/golang/common/trunk/
5. svn revert
   + revert文件: $ svn revert file
   + revert某个文件夹: $ svn revert -R dir
6. svn恢复某个文件夹: $ svn update dir 来恢复。   
7. svn两个branch merge，例如yyy/branch merge到 xxx/branch
   + $ svn switch xxx/branch  //先切换到branch
   + $ svn merge --reintegrate yyy/brahch .
   + $ svn diff //查看diff

# 二. awk和sed命令
1. sed大写字母转换成小写字母: $ sed 's/[A-Z]/\l&/g' file

# 三. find命令
1. 删除某个目录下所有.svn文件夹: $ find . -name *svn | xargs rm -rf  //删除所有.svn文件夹
2. 把某个文件夹下对应所有.svn移动到另一个对应文件夹下: $ find . -name .svn -print0 | xargs -0 -I {} mv '{}' '../browse_log/{}'

# 四. rpm命令
1. 查询程序是否安装: $ rpm -q samba
2. 搜索指定rpm包是否安装: $ rpm -qa | grep httpd
3. 搜索rpm包: $ rpm -ql httpd
4. 查看rpm包信息: $ rpm -qpi Linux-1.4-6.i368.rpm 
5. 查看rpm包的文件: $ rpm -qpf Linux-1.4-6.i368.rpm
6. 安装新的rpm包: $ rpm -ivh file.rpm
7. 升级一个rpm包: $ rpm -Uvh file.rpm
8. 删除一个rpm包: $ rpm -e file.rpm
9. 指定路径查看是否安装某些rpm包: $ rpm -qa --root=/home/admin/chenguolin/workdir/project/_external/ | grep google_url
10. 查看某些文件是属于哪个rpm包: $ rpm -qf /usr/local/lib64/libjvm.so
11. 查看rpm包的默认安装目录: $ rpm -qpl xxx.rpm
12. 指定位置安装rpm包: $ rpm -ivh --relocate /usr/bin=/home/admin/chenguolin xxx.rpm
13. rpm包解压: $ rpm2cpio xx.rpm | cpio -div

# 五. yum命令
1. 查看哪些rpm包中包含指定文件: $ yum provides libjvm.so
2. 搜索系统下的某些rpm包: $ yum search xxx

# 六. mysql命令
1. 登录mysql: $ mysql -h localhost --port port -u myname -p mypass mydb
2. shell脚本执行mysql命令: $ /usr/bin/mysql -h 127.0.0.1 -P 3307 -u cgl --password=cgl@2014 --execute="delete from test.browser_log where createtime < NOW() - INTERVAL 345600 SECOND;"

# 七. vim使用
1. 强制保存文件: w !sudo tee %   // %代指当前文件名, !sudo tee %表示用sudo权限输出到标准输出并且保存到当前文件中。
2. 可以在`.vimrc`里面配置 `command W w !sudo tee % > /dev/null` 使用W来代替强制保存命令

# 八. 运维问题
1. 查看进程是否因为OOM被kill
   + $ grep oom /var/log/messages
   + $ grep oom /var/log/kern
2. 运行C++ 可执行文件
   + $ /bin/env LD_LIBRARY_PATH=build/release64/packages/lib/ url_tool  //LD_LIBRARY_PATH指定依赖的so路径
3. 查看磁盘空间使用情况
   + 查看磁盘使用率: $ df -h
   + 查看/home目录空间: $ du -sh /home
   + 查看当前目录下所有文件大小: $ du . | sort -k1rn
   + 查看当前目录下一级子目录大小: $ du . -c --max-depth=1 | sort -k1rn

 
