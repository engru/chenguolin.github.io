---
layout:  post    # 使用的布局（不需要改）
catalog: true   # 是否归档
author: 陈国林 # 作者
tags:         #标签
    - Linux
---

1. svn版本控制使用  
   + svn删除远程仓库但是保持本地仓库: $ svn del spam_host_recover/build spam_host_recover/result --keep-local  
   + svn创建branch  
     + $ svn cp http://svn.xxx.com/svn/apsara/golang/common/trunk/ (trunk地址) http://svn.xxx.com/svn/apsara/golang/common/branches/chenguolin_20141024 (要创建branch地址) -m "mkdir branch"  
     + $ svn switch http://svn.xxx.com/svn/apsara/golang/common/branches/chenguolin_20141024  
     + $ svn info  //查看是否切换到branch  
   + svn branch合并
     + 先切换到trunk
     + $ svn merge --reintegrate http://svn.xxx.com/svn/apsara/golang/common/branches/chenguolin_20141024
     + 查看diff是否merge成功
   + svn查看branch和trunk的diff
     + $ svn diff --old http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/branches/chenguolin_20141024 --new http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/trunk/
   + svn revert
     + revert文件: $ svn revert file
     + revert某个文件夹: $ svn revert -R dir
   + svn恢复某个文件夹: $ svn update dir 来恢复。   
   + svn两个branch merge，例如yyy/branch merge到 xxx/branch
     + $ svn switch xxx/branch  //先切换到branch
     + $ svn merge --reintegrate yyy/brahch .
     + $ svn diff //查看diff

2. awk和sed使用
   + sed大写字母转换成小写字母: $ sed 's/[A-Z]/\l&/g' file

3. find命令
   + 删除某个目录下所有.svn文件夹
     + $ find . -name *svn   //查看所有.svn文件夹
     + $ find . -name *svn | xargs rm -rf  //删除所有.svn文件夹
   + 把某个文件夹下对应所有.svn移动到另一个对应文件夹下
     + $ find . -name .svn -print0 | xargs -0 -I {} mv '{}' '../browse_log/{}'
     + $ find . -name "build_options.py" -print0 | xargs -0 -I {} cp ./browse_log/build_options.py '{}'  //把browse_log下的build_options.py移动到当前目录的所有子目录下

4. rpm命令
   + 查询程序是否安装: $ rpm -q samba
   + 搜索指定rpm包是否安装: $ rpm -qa | grep httpd
   + 搜索rpm包: $ rpm -ql httpd
   + 查看rpm包信息: $ rpm -qpi Linux-1.4-6.i368.rpm 
   + 查看rpm包的文件: $ rpm -qpf Linux-1.4-6.i368.rpm
   + 安装新的rpm包: $ rpm -ivh file.rpm
   + 升级一个rpm包: $ rpm -Uvh file.rpm
   + 删除一个rpm包: $ rpm -e file.rpm
   + 指定路径查看是否安装某些rpm包: $ rpm -qa --root=/home/admin/chenguolin/workdir/project/_external/ | grep google_url
   + 查看某些文件是属于哪个rpm包: $ rpm -qf /usr/local/lib64/libjvm.so
   + 查看rpm包的默认安装目录: $ rpm -qpl xxx.rpm
   + 指定位置安装rpm包: $ rpm -ivh --relocate /usr/bin=/home/admin/chenguolin xxx.rpm

5. yum命令
   + 查看哪些rpm包中包含指定文件: $ yum provides libjvm.so
   + 搜索系统下的某些rpm包: $ yum search xxx

6. mysql命令
   + 登录mysql: $ mysql -h localhost --port port -u myname -p mypass mydb
   + shell脚本执行mysql命令: /usr/bin/mysql -h 127.0.0.1 -P 3307 -u cgl --password=cgl@2014 --execute="delete from test.browser_log where createtime < NOW() - INTERVAL 345600 SECOND;"

7. 运维问题
   + 查看进程是否因为OOM被kill
     + grep oom /var/log/messages
     + grep oom /var/log/kern
   + 运行C++ 可执行文件
     + /bin/env LD_LIBRARY_PATH=build/release64/packages/lib/ url_tool  //LD_LIBRARY_PATH指定依赖的so路径

31. 跑二进制文件
     


33. 正则表达式，转义字符
    .  $  ^  {  }  [  ]   (  )   |   *  +   ?   \
   a. 正则表达式中[]如果想要表示-，需要转义 \-



44. screen 配置
     escape ^Jj
     caption always "%{=B Bb} %{=B YK}%-w%<%{=B Rk} %n %t /%{=B GK}%+w%-02=%{=B B"

45. 强制保存vi文件
     w !sudo tee %   // %代指当前文件名, !sudo tee %表示用sudo权限输出到标准输出并且保存到当前文件中。
     可以再.vimrc里面配置 command W w !sudo tee % > /dev/null

46. spark
     a. 提交 spark-submit --num-executors 64 --executor-cores 4 --executor-memory 20G o2o_doc_process.py  // spark rdd的partition数不能比并发数少，并发数=executors*cores
     b. kill job: yarn application -kill  id

   
48. 查看磁盘空间使用情况
     1. du -sh /home
     2. df /home
     3. du -c --max-depth=1 | sort -n -r


53. rpm解压
    a. rpm2cpio xx.rpm | cpio -div

 
