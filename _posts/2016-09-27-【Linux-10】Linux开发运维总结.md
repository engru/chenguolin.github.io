---
layout:  post    # 使用的布局（不需要改）
catalog: true   # 是否归档
author: 陈国林 # 作者
tags:         #标签
    - Linux
---

1. SVN 版本控制使用  
   1). svn删除远程仓库但是保持本地仓库: $ svn del spam_host_recover/build spam_host_recover/result --keep-local



8.  sed 把所有的大写字母转换成小写字母
    sed 's/[A-Z]/\l&/g' file


11. svn打branch
     1. svn cp http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/trunk/ (trunk地址) http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/branches/chenguolin_20141024 (要创建branch地址) -m "mkdir branch"
     2. svn switch http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/branches/chenguolin_20141024
     3. svn info查看是否切换到branch
     4. branch merge回trunk
         a. 先切换到trunk
         b. svn merge --reintegrate http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/branches/chenguolin_20141024
         c. 查看diff是否merge成功
     5. svn查看branch和trunk的diff
         svn diff --old http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/branches/chenguolin_20141024 --new http://svn.simba.taobao.com/svn/Apsara/leopard/db/common/feature_merger/trunk/
     6. svn revert某个文件: svn revert file
         svn revert某个文件夹: svn revert -R dir
     7. svn 意外删除某个文件夹，可以用: svn update dir 来恢复。   
     8. svn 两个branch merge，例如yyy/branch merge到 xxx/branch
         a. 先切换到branch: svn switch xxx/branch
         b. svn merge --reintegrate yyy/brahch .
         c. svn diff 查看diff情况
     9. svn 利用版本号merge 到本地的work copy
         a. 确认本地的work的svn info
         b. svn merge -r v1:v2  yyy/branch   //把yyy这个branch从v1->v2版本之间所有的修改merge到本地work copy
         c. svn diff  查看diff
     10. galaxy_bot, may102010


13. 删除某个目录下所有.svn文件夹
      a. find . -name *svn   --查看所有.svn文件夹
      b. find . -name *svn | xargs rm -rf  --删除所有.svn文件夹
      
14. 把某个文件夹下对应所有.svn移动到 另一个对应文件夹下
     a. find  . -name .svn -print0 | xargs -0 -I {} mv '{}' '../uc_browse_log/{}'
     b. find . -name "build_options.py" -print0 | xargs -0 -I {} cp ./uc_browse_log/build_options.py '{}'  //把uc_browse_log下的build_options.py移动到当前目录的所有子目录下

15. 查看job是否因为OOM被kill
     1. sudo vim /var/log/messages
                           /var/log/kern
     2. 找对应的task的名称


23. rpm命令
      rpm -q samba //查询程序是否安装
      rpm -qa | grep httpd    // 搜索指定rpm包是否安装
      rpm -ql httpd         // 搜索rpm包
      rpm -qpi Linux-1.4-6.i368.rpm // 查看rpm包信息
      rpm -qpf Linux-1.4-6.i368.rpm // 查看rpm包的文件
      rpm -ivh file.rpm  // 安装新的rpm包
      rpm -Uvh file.rpm    // 升级一个rpm包
      rpm -e file.rpm      // 删除一个rpm包
      rpm -qa --root=/home/admin/chenguolin/workdir/project/_external/ | grep google_url  #指定路径查看是否安装google_url rpm包

      1. 用yum provides xxx 可以用来查看哪些rpm包中包含xxx文件，例如 yum provides libjvm.so
      2. 如果想查看本机已经安装的某些文件是属于哪个rpm包，可以用以下方法: rpm -qf /usr/local/lib64/libjvm.so
      3. yum search xxx  可以搜索系统下的xxx rpm包
      4. sudo find / -name libjson_linux-gcc-4.6_libmt.so   系统根目录下查找某个so的路径
      5. 上传rpm包到test或release源: repotool upload *.rpm -f test 或 repotool upload *.rpm -f release
      6. rpm指定安装位置: 
          1). rpm -qpl xxx.rpm 查看rpm包的默认安装目录 
               比如rpm包默认安装目录是 /usr/bin，我们希望重定向到/home/admin/chenguolin/
          2). rpm -ivh --relocate /usr/bin=/home/admin/chenguolin xxx.rpm



25. 所有顶级域名和二级域名列表
      https://publicsuffix.org/list/effective_tld_names.dat







29. MySQL常用命令
     1. 登录命令: mysql -h localhost --port port -u myname -p mypass mydb
     2. 查看某个table的列名: desc tableName;
         查看所有db; show databases;
         清空一个table: truncate table table;
     3. 已有的表添加一列: alter table tableName add cloumnName type;
     4. 调整列的顺序: alter table tableName modify cloumnName varchar(100) first;
                                  alter table tableName modify cloumnName varchar(100) after cloumnName2;
     5. python 操作mysql数据库，如果是insert、update、delete都必须要提交事务commit，抛异常回滚rollback
     6. 删除一行: delete from tableName where condition;
     7. shell脚本执行mysql命令: /usr/bin/mysql -h 10.99.84.63 -P 3307 -u gaia --password=gaia@2014 --execute="delete from test.youhui_test_log where gmt_create < NOW() - INTERVAL 345600 SECOND;"
     8. select结果按列显示: select * from feed_kuaibao where id = 110872 \G;


31. 跑二进制文件
     /bin/env LD_LIBRARY_PATH=build/release64/packages/staging/uc_log/ build/release64/bin/url_tool


33. 正则表达式，转义字符
    .  $  ^  {  }  [  ]   (  )   |   *  +   ?   \
   a. 正则表达式中[]如果想要表示-，需要转义 \-



37. python常用文件操作
     a. 判断文件是否存在: os.path.exists(file_path)
     b. 删除文件: os.remove(file_path)
     c. 删除空目录: os.rmdir(dir_path)
     d. 删除非空目录: shutil.rmtree(dir_path)



43. 查看job编译好的二进制，依赖的so
     a. fuxi 起job的时候默认把系统的LD_LIBRARY_PATH指定到build/release64/packages/staging/xxx下
     b. /bin/env LD_LIBRARY_PATH="./" ldd uc_log  指定LD_LIBRARY_PATH 可以查看二进制uc_log依赖的so

44. screen 配置
     escape ^Jj
     caption always "%{=B Bb} %{=B YK}%-w%<%{=B Rk} %n %t /%{=B GK}%+w%-02=%{=B B"

45. 强制保存vi文件
     w !sudo tee %   // %代指当前文件名, !sudo tee %表示用sudo权限输出到标准输出并且保存到当前文件中。
     可以再.vimrc里面配置 command W w !sudo tee % > /dev/null

46. spark
     a. 提交 spark-submit --num-executors 64 --executor-cores 4 --executor-memory 20G o2o_doc_process.py  // spark rdd的partition数不能比并发数少，并发数=executors*cores
     b. kill job: yarn application -kill  id

   
48. 查看磁盘空间使用情况
     1. du -sh /home
     2. df /home
     3. du -c --max-depth=1 | sort -n -r


53. rpm解压
    a. rpm2cpio xx.rpm | cpio -div

 
